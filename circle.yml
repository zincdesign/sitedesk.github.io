machine:
  ruby:
    version: 2.0.0
test:
  pre:
    - gem install jekyll jekyll-paginate
    - jekyll build
  override:
    - if [ -e _site/app ]; then echo 'Fail - Cannot have any files or folders named app' && exit 1; fi
    - echo TODO check spelling
    - echo TODO internal / external link checker
deployment:
  staging:
    tag: /staging.*/
    commands:
      - aws s3 sync ./_site/ s3://www.sitedesk.xyz/ --region eu-central-1 --exclude app/* --exclude assets/*
  prod:
    tag: /v[0-9].*/
    commands:
      - echo aws s3 sync ./_site/ s3://www.sitedesksoftware.com/ --region eu-central-1 --exclude app/* --exclude assets/*
